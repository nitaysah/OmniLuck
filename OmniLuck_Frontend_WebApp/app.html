<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        /* Flip Card Styles */
        .flip-card {
            background-color: transparent;
            width: 100%;
            height: 220px;
            perspective: 1000px;
            cursor: pointer;
            margin-top: 16px;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front,
        .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 20px;
            box-sizing: border-box;
        }

        .flip-card-back {
            transform: rotateY(180deg);
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid var(--accent-purple);
            padding: 16px;
            display: flex;
            flex-direction: column;
        }
    </style>
    <title>Discover Your Luck - OmniLuck</title>
    <meta name="description"
        content="Discover your daily luck percentage powered by celestial alignment and numerology">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;900&display=swap"
        rel="stylesheet">
    <link rel="apple-touch-icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ú®</text></svg>">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
</head>

<body>
    <!-- Spinning Galaxy Background -->
    <!-- Spinning Colliding Galaxies Background -->
    <div class="galaxy-container">
        <div class="galaxy-wrapper">
            <!-- Milky Way -->
            <div class="galaxy milky-way">
                <div class="galaxy-core"></div>
                <div class="arm"></div>
                <div class="arm"></div>
                <div class="arm"></div>
            </div>

            <!-- Andromeda -->
            <div class="galaxy andromeda">
                <div class="galaxy-core"></div>
                <div class="arm"></div>
                <div class="arm"></div>
                <div class="arm"></div>
            </div>

            <div class="stars"></div>
        </div>
    </div>

    <div class="app-container">
        <!-- User Menu (Floating Top Right for all views) -->
        <div class="user-menu-container" id="user-menu-container" style="display: none;">
            <button id="user-menu-btn" class="user-menu-btn">
                <span id="user-greeting">Hi, User</span>
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
            </button>
            <div id="user-dropdown" class="user-menu-dropdown">
                <div id="menu-logout-btn" class="menu-item" style="color: #d32f2f;">üö™ Logout</div>
            </div>
        </div>

        <!-- Dashboard View (Logged In Landing) -->
        <div id="dashboard-view" class="view">
            <header style="margin-top: 60px; margin-bottom: 30px;">
                <div class="logo-container" style="margin-bottom: 20px;">
                    <div class="logo-glow"></div>
                    <span class="sparkle-icon">‚ú®</span>
                </div>
                <h1 style="font-size: 2.2rem; margin-bottom: 10px; line-height: 1.2;">Welcome back, <br><span
                        id="dashboard-user-name" style="color: var(--accent-purple);">User</span></h1>
                <p style="opacity: 0.8; font-size: 1rem;">The cosmos awaits your query.</p>
            </header>

            <div class="card"
                style="background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.6); padding: 30px 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.05);">
                <div style="text-align: center;">
                    <div style="margin-bottom: 24px; color: var(--deep-purple);">
                        <p
                            style="font-size: 0.85rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; opacity: 0.7; margin-bottom: 8px;">
                            Your Profile</p>
                        <div
                            style="font-size: 1.2rem; font-weight: 700; display: flex; align-items: center; justify-content: center; gap: 8px;">
                            <span id="dashboard-zodiac-icon" style="font-size: 1.4rem;"></span>
                            <span id="dashboard-dob-display"></span>
                        </div>
                        <div style="font-size: 0.95rem; opacity: 0.8; margin-top: 4px;"
                            id="dashboard-birthplace-display"></div>
                    </div>

                    <button id="dashboard-reveal-btn" class="primary-btn"
                        style="box-shadow: 0 10px 25px rgba(124, 77, 255, 0.3); width: 100%;">
                        <span class="btn-text">Forecast my Luck</span>
                        <span class="btn-icon">ü™Ñ</span>
                    </button>
                </div>
            </div>

            <button id="dashboard-logout-main-btn" class="secondary-btn"
                style="margin-top: 24px; background: rgba(255,255,255,0.4); border: 1px solid rgba(255,255,255,0.5);">
                <span>üö™</span> Logout
            </button>
        </div>

        <!-- Input View -->
        <div id="input-view" class="input-view">
            <div style="position: absolute; top: 20px; left: 20px; z-index: 10;">
                <button id="guest-home-btn"
                    style="background: white; border: 1px solid rgba(128, 77, 179, 0.3); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; color: var(--deep-purple); cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.05); transition: all 0.2s ease;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                </button>
            </div>

            <div class="header-section">
                <div class="logo-container">
                    <div class="logo-glow"></div>
                    <span class="sparkle-icon">‚ú®</span>
                </div>


                <h1>Discover Your Luck</h1>
                <p>A Fusion of Astrology, Physics & Predictive AI</p>
                </header>

                <div class="card">
                    <div class="input-group">
                        <label for="name">
                            <span class="label-icon">üë§</span> YOUR NAME
                        </label>
                        <input type="text" id="name" placeholder="Enter your name">
                    </div>

                    <div class="input-group">
                        <label for="dob">
                            <span class="label-icon">üìÖ</span> DATE OF BIRTH
                        </label>
                        <input type="date" id="dob">
                    </div>



                    <div class="input-group">
                        <label for="birth-place">
                            <span class="label-icon">üìç</span> PLACE OF BIRTH
                        </label>
                        <input type="text" id="birth-place" placeholder="City, Country (e.g. Dallas, USA)">
                    </div>

                    <div class="input-group">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <label for="birth-time" style="margin-bottom: 0;">
                                <span class="label-icon">‚è∞</span> TIME OF BIRTH
                            </label>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <button id="tob-info-btn" type="button" class="info-circle">i</button>
                            </div>
                        </div>

                        <!-- Don't Know Checkbox -->
                        <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 8px;">
                            <input type="checkbox" id="tob-na-checkbox" style="width: auto; margin: 0;">
                            <label for="tob-na-checkbox"
                                style="font-size: 0.85rem; color: var(--deep-purple); margin: 0; cursor: pointer;">Don't
                                know</label>
                        </div>

                        <!-- Time & Timezone Container -->
                        <div id="time-inputs-container">
                            <div style="position: relative; margin-bottom: 12px;">
                                <input type="time" id="birth-time" style="width: 100%;">
                            </div>
                        </div>

                        <!-- N/A Message (Hidden by default) -->
                        <div id="tob-na-message"
                            style="display: none; font-size: 0.75rem; color: var(--deep-purple); opacity: 0.8; font-style: italic; margin-top: 4px;">
                            Midday Alignment Active: Following the Astrology standard for unknown birth times, your
                            chart is
                            anchored to 12:00 PM to maximize planetary accuracy and ensure a reliable luck forecast.
                        </div>

                        <div id="tob-explainer" class="explainer-text" style="display: none;">
                            Add your exact local time of birth for full precision. This data acts as your cosmic GPS,
                            identifying the precise degrees of your Rising Sign and the 12 Life Houses that shift every
                            few
                            minutes. These details are vital for accurate daily insights and a truly personalized Luck
                            Score. If unknown, we apply the 12:00 PM Astrology standard to maximize planetary accuracy
                            and
                            provide reliable guidance.
                        </div>
                    </div>

                    <!-- Personal Context Section -->


                    <!-- Personal Context Section -->
                </div>

                <button id="reveal-btn" class="primary-btn">
                    <span class="btn-text">Forecast my Luck</span>
                    <span class="loading-spinner" style="display: none;"></span>
                    <span class="btn-icon">ü™Ñ</span>
                </button>

                <button id="logout-main-btn" class="secondary-btn" style="margin-top: 16px;">
                    <span>üö™</span> Logout
                </button>
            </div>

            <!-- Result View -->
            <div id="result-view" class="view">
                <button id="back-btn" class="back-btn">
                    <span>‚Üê</span> Back
                </button>

                <div class="result-content">
                    <div class="result-header">
                        <h2>Your Daily Luck</h2>
                        <!-- Zodiac Moved -->
                    </div>

                    <div class="luck-circle">
                        <svg class="progress-ring" viewBox="0 0 200 200">
                            <circle class="progress-ring-bg" cx="100" cy="100" r="90" />
                            <circle class="progress-ring-fill" cx="100" cy="100" r="90" />
                        </svg>
                        <div class="luck-value">
                            <span id="result-percentage">0</span>
                            <span class="percent-sign">%</span>
                        </div>
                    </div>

                    <!-- NEW: Daily Report Button -->
                    <!-- Buttons Moved -->

                    <!-- Cosmic Dashboard Removed -->

                    <div class="fortune-card">
                        <!-- New Caption: "Cosmic Jackpot!" -->
                        <h2 id="result-caption" class="result-caption"></h2>

                        <div class="fortune-header">
                            <span class="fortune-icon">‚ú®</span>
                            <h3>Daily Luck Analysis</h3>
                        </div>

                        <p id="fortune-text"></p>

                        <!-- Factors Summary -->
                        <div id="factors-box" class="factors-box">
                            <span class="factors-label">WHY THIS SCORE:</span>
                            <p id="factors-text"></p>
                        </div>

                        <!-- Trait Pills -->
                        <div id="traits-list" class="traits-list"></div>
                    </div>

                    <!-- NEW: Cosmic Strategy Protocol Card -->
                    <div id="strategy-card" class="fortune-card"
                        style="display: none; background: rgba(255, 255, 255, 0.9); border-color: var(--accent-purple);">
                        <div class="fortune-header">
                            <span class="fortune-icon">üß≠</span>
                            <h3>Cosmic Strategy</h3>
                        </div>

                        <p id="strategy-text"
                            style="font-style: italic; color: var(--deep-purple); opacity: 0.9; margin-bottom: 16px;">
                        </p>

                        <div style="display: flex; flex-direction: column; gap: 8px;">
                            <span
                                style="font-size: 0.75rem; font-weight: 700; text-transform: uppercase; color: var(--accent-purple); letter-spacing: 1px;">POWER
                                HOURS</span>
                            <div id="time-slots-list" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                <!-- Injected Time Pills -->
                            </div>
                        </div>
                    </div>


                    <!-- 7-Day Forecast FLIP Card -->
                    <div id="forecast-flip-card" class="flip-card" style="display: none;">
                        <div class="flip-card-inner" id="forecast-flip-inner">

                            <!-- FRONT SIDE - Teaser -->
                            <div class="flip-card-front"
                                style="display: flex; flex-direction: column; align-items: center; justify-content: center; background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(192, 153, 240, 0.25)); border: 1px solid var(--accent-purple);">
                                <span style="font-size: 3rem; margin-bottom: 12px;">üîÆ</span>
                                <h3 style="color: var(--deep-purple); font-weight: 700; margin: 0;">7-Day Cosmic
                                    Forecast
                                </h3>
                                <p style="color: var(--deep-purple); opacity: 0.7; margin: 8px 0 0 0;">Tap to reveal
                                    your
                                    luck trajectory</p>
                                <div
                                    style="display: flex; align-items: center; gap: 8px; margin-top: 16px; color: var(--accent-purple);">
                                    <span style="font-size: 1.2rem;">üëÜ</span>
                                    <span style="font-size: 0.85rem; font-weight: 600;">Click to flip</span>
                                </div>
                            </div>

                            <!-- BACK SIDE - Full Chart -->
                            <div class="flip-card-back">

                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <span style="font-size: 1.3rem;">üìÖ</span>
                                        <h3 style="margin: 0; font-size: 1rem; color: var(--deep-purple);">7-Day Luck
                                            Trajectory</h3>
                                    </div>
                                    <span style="font-size: 1.1rem; opacity: 0.5;">‚Ü©Ô∏è</span>
                                </div>

                                <div
                                    style="display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.8rem; padding: 0 4px;">
                                    <span style="color: var(--deep-purple);">Trend: <strong id="forecast-trend"
                                            style="color: var(--accent-purple);">--</strong></span>
                                    <span style="color: var(--deep-purple);">Peak: <strong id="forecast-best"
                                            style="color: var(--accent-purple);">--</strong></span>
                                </div>

                                <div id="forecast-list"
                                    style="display: flex; gap: 4px; flex: 1; width: 100%; align-items: flex-end;">
                                    <!-- JS Injected Items -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Daily Report Button (Moved here) -->
                    <button id="kundali-btn" class="secondary-btn"
                        style="margin-bottom: 24px; background: rgba(255,255,255,0.3); border: 1px solid var(--accent-purple);">
                        <span>üìú</span> Read my Daily Astro Report
                    </button>

                    <!-- NEW: Report Modal (Hidden by default) -->
                    <div id="kundali-modal" class="modal" style="display: none;">
                        <div class="modal-content card">
                            <span class="close-modal">&times;</span>
                            <h3>Daily Cosmic Report</h3>
                            <div id="kundali-report-content" class="report-text">
                                <p>Loading report...</p>
                            </div>
                        </div>
                    </div>


                </div>

                <button id="try-again-btn" class="secondary-btn">
                    <span>üè†</span> Home
                </button>
            </div>
        </div>

        <!-- Firebase Config -->
        <script type="module" src="firebase-config.js?v=5"></script>
        <!-- API Client -->
        <script type="module" src="api-client.js?v=5"></script>
        <!-- Main Logic -->
        <script type="module" src="script.js?v=5"></script>
</body>

</html>