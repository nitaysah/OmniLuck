<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        /* QR Code & Retailer Styles */
        .qr-container {
            display: none;
            /* Hidden by default */
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
            padding: 20px;
            background: white;
            border: 2px dashed var(--accent-purple);
            border-radius: 16px;
        }

        .retailer-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid #eee;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: var(--deep-purple);
        }

        input:checked+.slider:before {
            transform: translateX(26px);
        }

        /* Powerball Icon - Solid 3D Red ball with curved BALL text */
        .pb-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 28px;
            min-height: 28px;
            width: 28px;
            height: 28px;
            /* Solid 3D Sphere - no shine */
            background: radial-gradient(circle at 35% 35%, #E53935 0%, #C62828 40%, #B71C1C 70%, #8B0000 100%);
            border-radius: 50%;
            color: transparent;
            font-size: 6px;
            font-weight: 900;
            font-family: 'Arial Black', Arial, sans-serif;
            /* Solid sphere shadow for 3D depth */
            box-shadow:
                inset -3px -3px 8px rgba(0, 0, 0, 0.6),
                inset 2px 2px 4px rgba(255, 200, 200, 0.15),
                0 3px 6px rgba(0, 0, 0, 0.4);
            vertical-align: middle;
            flex-shrink: 0;
            position: relative;
            overflow: hidden;
        }

        /* Curved horizontal text spanning corner to corner */
        .pb-icon::after {
            content: 'BALL';
            position: absolute;
            font-size: 7px;
            font-weight: 900;
            font-family: 'Arial Black', Arial, sans-serif;
            letter-spacing: 1.5px;
            color: white;
            /* Horizontal, stretched corner to corner */
            width: 100%;
            text-align: center;
            /* Curved text effect - arc illusion with perspective */
            transform: perspective(50px) rotateX(-15deg);
            text-shadow:
                0 1px 0 rgba(0, 0, 0, 0.8),
                0 -1px 0 rgba(255, 255, 255, 0.15),
                0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .pb-icon-lg {
            min-width: 64px;
            min-height: 64px;
            width: 64px;
            height: 64px;
        }

        .pb-icon-lg::after {
            font-size: 15px;
            letter-spacing: 3px;
            transform: perspective(100px) rotateX(-15deg);
        }

        .flip-card {
            background-color: transparent;
            width: 100%;
            height: 220px;
            perspective: 1000px;
            cursor: pointer;
            margin-top: 0;
            margin-bottom: 5px;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front,
        .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 20px;
            box-sizing: border-box;
        }

        .flip-card-back {
            transform: rotateY(180deg);
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid var(--accent-purple);
            padding: 16px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        /* Section Buttons */
        .section-button {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(128, 77, 179, 0.3);
            border-radius: 14px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--deep-purple);
            transition: all 0.2s ease;
            margin-bottom: 5px;
        }

        .section-button:hover {
            background: rgba(255, 255, 255, 0.85);
            border-color: var(--accent-purple);
            transform: translateY(-1px);
        }

        .section-button.power-hours {
            border-color: rgba(255, 200, 100, 0.6);
        }

        /* Modal Overlay */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.2s ease;
        }

        .modal-overlay.active {
            display: flex;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .modal-card {
            background: white;
            border-radius: 20px;
            max-width: 90%;
            max-height: 80vh;
            width: 400px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: scaleIn 0.25s ease;
            display: flex;
            flex-direction: column;
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            background: rgba(128, 77, 179, 0.1);
            border-bottom: 1px solid rgba(128, 77, 179, 0.1);
        }

        .modal-header h3 {
            margin: 0;
            font-size: 1rem;
            color: var(--deep-purple);
        }

        .modal-close-x {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--accent-purple);
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s;
        }

        .modal-close-x:hover {
            opacity: 1;
        }

        .modal-content {
            padding: 20px;
            max-height: 50vh;
            overflow-y: auto;
            color: var(--deep-purple);
            line-height: 1.6;
            flex: 1;
        }

        .modal-footer {
            padding: 16px 20px;
            border-top: 1px solid rgba(128, 77, 179, 0.1);
        }

        .modal-close-btn {
            width: 100%;
            padding: 14px;
            background: var(--accent-purple);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .modal-close-btn:hover {
            background: var(--deep-purple);
        }

        .modal-close-btn.gold {
            background: var(--accent-gold);
            color: var(--deep-purple);
        }

        /* Premium Gold Accent for Personal QR */
        .personal-qr-container {
            border: 4px solid #FFD700 !important;
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.5) !important;
            background: linear-gradient(135deg, #fff 0%, #fffdf0 100%) !important;
            transform: scale(1.02);
            transition: all 0.3s ease;
        }

        .personal-qr-container #qr-code-label {
            color: #B8860B !important;
            font-weight: 800 !important;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
        }

        /* Responsive Fixes for Small Screens */
        @media (max-width: 480px) {
            .modal-card {
                width: 95% !important;
                max-width: 95% !important;
                max-height: 90vh;
                /* Allow taller on small screens */
            }

            .modal-content {
                padding: 16px;
                /* Reduce padding */
            }

            .modal-header {
                padding: 12px 16px;
            }

            .section-button {
                padding: 12px 14px;
                font-size: 0.85rem;
                /* Smaller text */
            }

            #result-caption {
                font-size: 0.9rem !important;
            }

            /* Ensure Retailer List doesn't overflow */
            #retailer-list {
                font-size: 0.85rem;
            }

            /* Dashboard Optimization for Mobile */
            .profile-grid {
                display: flex;
                flex-direction: column;
                gap: 16px;
            }

            .profile-item {
                display: flex;
                flex-direction: column;
                gap: 4px;
            }

            .profile-value {
                font-weight: 700;
                font-size: 1.15rem;
                color: var(--deep-purple);
                line-height: 1.4;
                letter-spacing: -0.01em;
            }

            @media (max-width: 480px) {

                /* Compact Header */
                header {
                    margin-top: 20px !important;
                    margin-bottom: 15px !important;
                }

                #dashboard-user-name {
                    font-size: 2.2rem !important;
                }

                /* Compact Profile Grid */
                .profile-grid {
                    display: grid !important;
                    grid-template-columns: 1fr 1fr;
                    gap: 12px 12px !important;
                }

                .profile-item.full-width {
                    grid-column: span 2;
                }

                .profile-value {
                    font-size: 1.2rem !important;
                }

                /* Compact Card */
                #dashboard-view .card {
                    padding: 20px 16px !important;
                }
            }
        }
    </style>
    <title>Decode Your Luck - OmniLuck</title>
    <meta name="description"
        content="Discover your daily luck percentage powered by celestial alignment and numerology">
    <link rel="stylesheet" href="style.css?v=4">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;900&display=swap"
        rel="stylesheet">
    <link rel="apple-touch-icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ú®</text></svg>">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>

<body>
    <!-- Spinning Galaxy Background -->
    <!-- Spinning Colliding Galaxies Background -->
    <div class="galaxy-container">
        <div class="galaxy-wrapper">
            <!-- Milky Way -->
            <div class="galaxy milky-way">
                <div class="galaxy-core"></div>
                <div class="arm"></div>
                <div class="arm"></div>
                <div class="arm"></div>
            </div>

            <!-- Andromeda -->
            <div class="galaxy andromeda">
                <div class="galaxy-core"></div>
                <div class="arm"></div>
                <div class="arm"></div>
                <div class="arm"></div>
            </div>

            <div class="stars"></div>
        </div>
    </div>

    <div class="app-container">
        <!-- User Menu (Floating Top Right for all views) -->
        <div class="user-menu-container" id="user-menu-container" style="display: none;">
            <button id="user-menu-btn" class="user-menu-btn">
                <span id="user-greeting">Hi, User</span>
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
            </button>
            <div id="user-dropdown" class="user-menu-dropdown">
                <div id="menu-about-btn" class="menu-item">‚ÑπÔ∏è About Us</div>
                <div id="menu-contact-btn" class="menu-item">üìß Contact Us</div>
                <div id="menu-settings-btn" class="menu-item">‚öôÔ∏è Settings</div>
                <div id="menu-logout-btn" class="menu-item" style="color: #d32f2f;">üö™ Logout</div>
            </div>
        </div>

        <!-- Dashboard View (Logged In Landing) -->
        <div id="dashboard-view" class="view">
            <header style="margin-top: 30px; margin-bottom: 10px;">
                <!-- Welcome Text Stack (No Icon) -->
                <div style="display: flex; flex-direction: column; align-items: center; gap: 0px; line-height: 1;">
                    <span
                        style="font-size: 1.3rem; font-weight: 700; color: var(--deep-purple); margin-bottom: -2px;">Welcome
                        back,</span>
                    <span id="dashboard-user-name"
                        style="font-size: 2.4rem; font-weight: 600; color: #4A8C5E; text-shadow: 0 0 6px rgba(74, 140, 94, 0.3); line-height: 1; font-family: 'Courier New', monospace; letter-spacing: 1px; text-transform: capitalize;">User</span>
                </div>
                <p style="opacity: 0.6; font-size: 0.85rem; margin-top: 4px; color: var(--deep-purple);">Ready to decode
                    your daily potential?</p>
            </header>

            <!-- Profile Card (Collapsible) -->
            <div class="card"
                style="background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.6); padding: 14px; box-shadow: 0 10px 25px rgba(0,0,0,0.04); margin-bottom: 12px;">
                <!-- Header -->
                <!-- Header -->
                <div id="profile-card-header"
                    style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <p
                            style="font-size: 0.9rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--deep-purple); margin: 0;">
                            Your Luck DNA</p>
                        <button id="open-edit-profile-btn"
                            style="background: white; border: 1px solid rgba(128,77,179,0.2); border-radius: 20px; padding: 6px 14px; display: flex; align-items: center; gap: 6px; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                            <span
                                style="font-size: 0.75rem; font-weight: 700; color: var(--deep-purple); letter-spacing: 0.5px;">EDIT</span>
                            <span style="font-size: 0.9rem;">‚úèÔ∏è</span>
                        </button>
                    </div>
                    <span id="profile-card-arrow"
                        style="color: var(--accent-purple); font-size: 1.2rem; transition: transform 0.3s; transform: rotate(-90deg);">‚ñº</span>
                </div>

                <!-- Content -->
                <div id="profile-card-content"
                    style="display: none; margin-top: 12px; border-top: 1px solid rgba(128,77,179,0.1); padding-top: 12px; animation: fadeIn 0.3s ease;">
                    <div class="profile-grid" style="padding: 0 5px; text-align: left;">
                        <!-- Name -->
                        <div class="profile-item full-width">
                            <span
                                style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.5; font-weight: 700;">Full
                                Name:</span>
                            <span id="dashboard-name-display" class="profile-value">--</span>
                        </div>

                        <!-- Phone -->
                        <div class="profile-item full-width">
                            <span
                                style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.5; font-weight: 700;">Phone
                                Number:</span>
                            <span id="dashboard-phone-display" class="profile-value">--</span>
                        </div>

                        <!-- Zodiac -->
                        <div class="profile-item">
                            <span
                                style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.5; font-weight: 700;">Zodiac
                                Sign:</span>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span style="font-size: 1.5rem;" id="dashboard-zodiac-icon">‚ú®</span>
                                <span id="dashboard-zodiac-name" class="profile-value">--</span>
                            </div>
                        </div>

                        <!-- DOB -->
                        <div class="profile-item">
                            <span
                                style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.5; font-weight: 700;">Date
                                of Birth:</span>
                            <span id="dashboard-dob-display" class="profile-value">--</span>
                        </div>

                        <!-- Place -->
                        <div class="profile-item">
                            <span
                                style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.5; font-weight: 700;">Place
                                of Birth:</span>
                            <span id="dashboard-place-display" class="profile-value">--</span>
                        </div>

                        <!-- Time -->
                        <div class="profile-item">
                            <span
                                style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.5; font-weight: 700;">Time
                                of Birth:</span>
                            <span id="dashboard-time-display" class="profile-value">--</span>
                        </div>

                        <!-- Current Location -->
                        <div class="profile-item full-width">
                            <span
                                style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.5; font-weight: 700;">Current
                                Location:</span>
                            <span id="dashboard-location-display" class="profile-value">--</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Decode Card -->
            <div class="card"
                style="background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.6); padding: 14px; box-shadow: 0 10px 25px rgba(0,0,0,0.04); margin-bottom: 12px;">
                <button id="dashboard-reveal-btn" class="primary-btn"
                    style="box-shadow: 0 10px 25px rgba(124, 77, 255, 0.3); width: 100%;">
                    <span class="btn-text">Decode My Daily Luck</span>
                    <div class="wand-loading-container">
                        <span class="magic-trail trail-1">‚ú®</span>
                        <span class="magic-trail trail-2">‚ú®</span>
                        <span class="magic-wand-icon">ü™Ñ</span>
                        <span class="magic-trail trail-3">‚ú®</span>
                    </div>
                    <span class="btn-icon">ü™Ñ</span>
                </button>
            </div>

            <!-- Lottery Card -->
            <div class="card"
                style="background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.6); padding: 14px; box-shadow: 0 10px 25px rgba(0,0,0,0.04); margin-bottom: 12px;">
                <button id="lottery-reveal-btn" onclick="window.handleLotteryClick()" class="primary-btn"
                    style="width: 100%; box-shadow: 0 10px 25px rgba(124, 77, 255, 0.3);">
                    <span class="btn-text">Decode my Lucky Numbers</span>
                    <div class="wand-loading-container">
                        <span class="magic-trail trail-1">‚ú®</span>
                        <span class="magic-trail trail-2">‚ú®</span>
                        <span class="magic-wand-icon">üé±</span>
                        <span class="magic-trail trail-3">‚ú®</span>
                    </div>
                    <span class="btn-icon">üé±</span>
                </button>
            </div>

            <!-- Logout Card -->
            <div class="card"
                style="background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.6); padding: 14px; box-shadow: 0 10px 25px rgba(0,0,0,0.04);">
                <button id="dashboard-logout-main-btn" class="primary-btn"
                    style="width: 100%; background: linear-gradient(135deg, #FF8A80 0%, #FF5252 100%); box-shadow: 0 10px 25px rgba(255, 82, 82, 0.3);">
                    <span>üö™</span> Logout
                </button>
            </div>

            <!-- Privacy Policy -->
            <div
                style="margin-top: auto; padding-top: 20px; text-align: center; font-size: 0.75rem; color: var(--deep-purple-lighter); opacity: 0.8;">
                <a href="privacy.html" style="text-decoration: none; color: inherit;">Privacy Policy</a>
            </div>
        </div>

        <!-- Lottery Modal (Pop-up for Lucky Numbers) -->
        <div id="lottery-modal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'lottery')">
            <div class="modal-card" style="max-height: 85vh; display: flex; flex-direction: column;"
                onclick="event.stopPropagation()">
                <div class="modal-header">
                    <h3><span class="pb-icon"></span> Lucky Powerball Numbers</h3>
                    <button class="modal-close-x" onclick="closeModal('lottery')">√ó</button>
                </div>
                <div class="modal-content" id="powerball-content" style="overflow-y: auto; flex: 1;">
                    <!-- Personal Powerball -->
                    <div id="personal-powerball-section" style="margin-bottom: 24px;">
                        <h4
                            style="color: #B8860B; margin: 0 0 12px 0; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 700;">
                            üåü Your Personal Lucky Numbers
                        </h4>
                        <div id="personal-powerball-display"
                            style="display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; margin-bottom: 8px;">
                            <!-- White balls and powerball will be rendered here -->
                        </div>
                        <p
                            style="font-size: 0.75rem; color: var(--deep-purple); opacity: 0.6; font-style: italic; margin: 0;">
                            Personalized using your cosmic profile & live lottery trends
                        </p>
                    </div>

                    <!-- Daily Powerballs -->
                    <div id="daily-powerballs-section">
                        <div
                            style="display: flex; flex-direction: column; gap: 10px; margin-bottom: 12px; border-bottom: 1px solid rgba(0,0,0,0.05); padding-bottom: 12px;">
                            <h4
                                style="color: var(--accent-purple); margin: 0; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px;">
                                üìÖ Today's Cosmic Combinations
                            </h4>
                            <div id="cosmic-expiry-container"
                                style="font-size: 0.75rem; color: #dc2626; font-weight: 600; margin-bottom: 8px; display: flex; align-items: center; gap: 4px;">
                                <span>‚è≥ Cosmic Alignment Expiry:</span>
                                <span id="cosmic-countdown">--:--:--</span>
                            </div>
                            <div style="display: flex; gap: 8px; align-items: center;">
                                <span style="font-size: 0.8rem; color: #666;">Lines:</span>
                                <input type="number" id="pb-lines-input" value="5" min="1" max="50" placeholder="Max 50"
                                    style="width: 50px; padding: 6px; border: 1px solid #ddd; border-radius: 8px; font-family: inherit; text-align: center;">
                                <button id="pb-generate-btn"
                                    style="background: var(--deep-purple); color: white; border: none; padding: 6px 16px; border-radius: 8px; font-size: 0.8rem; cursor: pointer; flex: 1; font-weight: 500; font-family: inherit;">Generate
                                    Request</button>
                            </div>
                        </div>
                        <div id="daily-powerballs-list">
                            <!-- Daily combinations will be rendered here -->
                        </div>
                    </div>

                    <!-- History Comparison Card (NEW) -->
                    <div id="comparison-section"
                        style="margin-top: 20px; padding: 16px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.08) 100%); border: 1px solid rgba(99, 102, 241, 0.2); border-radius: 12px;">
                        <h4
                            style="color: var(--deep-purple); margin: 0 0 8px 0; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px; display: flex; align-items: center; gap: 8px;">
                            üìä Compare with Past Drawings
                        </h4>
                        <p style="color: #666; font-size: 0.8rem; margin: 0 0 12px 0;">
                            See how your numbers match with recent Powerball results
                        </p>
                        <button id="compare-numbers-btn" onclick="openModal('comparison')"
                            style="width: 100%; background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); color: white; border: none; padding: 12px; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 0.9rem; display: flex; align-items: center; justify-content: center; gap: 8px;">
                            <span>üîç</span> Compare My Numbers
                        </button>
                    </div>

                    <!-- Retailer Bridge Section -->
                    <div style="margin-top: 24px; padding-top: 16px; border-top: 1px solid #eee;">
                        <!-- Retailer Locator -->
                        <div style="margin-bottom: 32px;">
                            <h4
                                style="color: var(--deep-purple); margin: 0 0 12px 0; font-size: 0.9rem; text-transform: uppercase;">
                                üìç Nearby Retailers
                            </h4>

                            <div style="display: flex; gap: 8px; margin-bottom: 12px;">
                                <input type="text" id="retailer-zip" placeholder="Zip Code"
                                    style="width: 100px; padding: 10px; border: 1px solid #ddd; border-radius: 12px; font-family: inherit; text-align: center; font-size: 1rem;">
                                <button id="find-retailers-btn"
                                    style="flex: 1; background: white; border: 1px solid var(--deep-purple); color: var(--deep-purple); padding: 10px; border-radius: 12px; font-weight: 600; cursor: pointer;">
                                    Search Nearby Stores
                                </button>
                            </div>

                            <div id="retailer-list"
                                style="background: #f9f9f9; border-radius: 12px; overflow: hidden; min-height: 0;">
                            </div>
                        </div>

                        <!-- Digital Play Slip -->
                        <div
                            style="background: rgba(128, 77, 179, 0.05); border: 1px dashed var(--accent-purple); border-radius: 12px; padding: 16px; text-align: center; margin-bottom: 24px;">
                            <div style="margin-bottom: 4px; font-size: 1.5rem;">üì±</div>
                            <p style="margin: 0; font-weight: 600; color: var(--deep-purple); font-size: 0.9rem;">
                                Digital Play Slip & QR Scan
                            </p>
                            <p style="margin: 4px 0 0 0; font-size: 0.75rem; color: #666; font-style: italic;">
                                Coming Soon! Use this at supported retailers.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="modal-close-btn gold" onclick="closeModal('lottery')">Close</button>
                </div>
            </div>
        </div>

        <!-- Input View -->
        <div id="input-view" class="view input-view">
            <div style="position: absolute; top: 15px; left: 15px; z-index: 10;">
                <button id="guest-home-btn"
                    style="background: white; border: 1px solid rgba(128, 77, 179, 0.3); border-radius: 50%; width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; color: var(--deep-purple); cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.1); transition: all 0.2s ease;">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                </button>
            </div>

            <div class="header-section" style="text-align: center; padding-top: 15px; margin-bottom: 12px;">
                <h1 style="font-size: 1.8rem; font-weight: 800; color: var(--deep-purple); margin-bottom: 6px;">Decode
                    Your Luck</h1>
                <p style="font-size: 0.9rem; color: var(--deep-purple-lighter); margin: 0;">Your daily luck, decoded by
                    Personalized AI, Astrology and the cosmic signals</p>
            </div>

            <div class="card">
                <div class="input-group">
                    <label for="name">
                        <span class="label-icon">üë§</span> YOUR NAME <span style="color: #ff4444;">*</span>
                    </label>
                    <input type="text" id="name" placeholder="Enter your name">
                </div>

                <div class="input-group">
                    <label for="dob">
                        <span class="label-icon">üìÖ</span> DATE OF BIRTH <span style="color: #ff4444;">*</span>
                    </label>
                    <input type="date" id="dob">
                </div>



                <div class="input-group">
                    <label for="birth-place">
                        <span class="label-icon">üìç</span> PLACE OF BIRTH <span style="color: #ff4444;">*</span>
                    </label>
                    <input type="text" id="birth-place" placeholder="City, Country (e.g. Dallas, USA)">
                </div>

                <div class="input-group">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <label for="birth-time" style="margin-bottom: 0;">
                            <span class="label-icon">‚è∞</span> TIME OF BIRTH <span style="color: #ff4444;">*</span>
                        </label>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <button id="tob-info-btn" type="button" class="info-circle">i</button>
                        </div>
                    </div>

                    <!-- Don't Know Checkbox -->
                    <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 8px;">
                        <input type="checkbox" id="tob-na-checkbox" style="width: auto; margin: 0;">
                        <label for="tob-na-checkbox"
                            style="font-size: 0.85rem; color: var(--deep-purple); margin: 0; cursor: pointer;">Don't
                            know</label>
                    </div>

                    <!-- Time & Timezone Container -->
                    <div id="time-inputs-container">
                        <div style="position: relative; margin-bottom: 12px;">
                            <input type="time" id="birth-time" style="width: 100%;">
                        </div>
                    </div>

                    <!-- N/A Message (Hidden by default) -->
                    <div id="tob-na-message"
                        style="display: none; font-size: 0.75rem; color: var(--deep-purple); opacity: 0.8; font-style: italic; margin-top: 4px;">
                        Midday Alignment Active: Following the Astrology standard for unknown birth times, your
                        chart is
                        anchored to 12:00 PM to maximize planetary accuracy and ensure a reliable luck forecast.
                    </div>

                    <div id="tob-explainer" class="explainer-text" style="display: none;">
                        Add your exact local time of birth for full precision. This data acts as your cosmic GPS,
                        identifying the precise degrees of your Rising Sign and the 12 Life Houses that shift every
                        few
                        minutes. These details are vital for accurate daily insights and a truly personalized Luck
                        Score. If unknown, we apply the 12:00 PM Astrology standard to maximize planetary accuracy
                        and
                        provide reliable guidance.
                    </div>
                </div>

                <!-- Current Location -->
                <div class="input-group">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <label for="current-location" style="margin-bottom: 0;">
                            <span class="label-icon">üìç</span> CURRENT LOCATION <span style="color: #ff4444;">*</span>
                        </label>
                        <button id="location-info-btn" type="button" class="info-circle">i</button>
                    </div>
                    <input type="text" id="current-location" placeholder="City, Country (e.g. Dallas, USA)">
                    <div id="location-explainer" class="explainer-text" style="display: none;">
                        Your current location is used to fetch local weather data and cosmic signals (moon phase,
                        geomagnetic activity) for more accurate daily luck predictions.
                    </div>
                </div>

                <!-- Personal Context Section -->


                <!-- Personal Context Section -->
            </div>

            <button id="reveal-btn" class="primary-btn">
                <span class="btn-text">Decode My Daily Luck</span>
                <div class="wand-loading-container">
                    <span class="magic-trail trail-1">‚ú®</span>
                    <span class="magic-trail trail-2">‚ú®</span>
                    <span class="magic-wand-icon">ü™Ñ</span>
                    <span class="magic-trail trail-3">‚ú®</span>
                </div>
                <span class="btn-icon">ü™Ñ</span>
            </button>

            <!-- Decode Lucky Numbers (Guest - prompts signup) -->
            <button id="guest-lucky-numbers-btn" class="primary-btn" style="margin-top: 12px;"
                onclick="window.showSignupPrompt()">
                <span class="btn-text">Decode my Lucky Numbers</span>
                <div class="wand-loading-container">
                    <span class="magic-trail trail-1">‚ú®</span>
                    <span class="magic-trail trail-2">‚ú®</span>
                    <span class="magic-wand-icon">üé±</span>
                    <span class="magic-trail trail-3">‚ú®</span>
                </div>
                <span class="btn-icon">üé±</span>
            </button>

            <button id="logout-main-btn" class="primary-btn"
                style="margin-top: 16px; background: linear-gradient(135deg, #FF8A80 0%, #FF5252 100%);">
                <span>üè†</span> Home
            </button>

        </div>
        <!-- Result View -->
        <div id="daily-luck-result-view" class="view">
            <!-- Back Button -->
            <div style="display: flex; justify-content: flex-start;">
                <button id="daily-luck-back-btn" onclick="window.goBack()"
                    style="display: flex; align-items: center; gap: 6px; padding: 10px 16px; background: rgba(255,255,255,0.8); backdrop-filter: blur(10px); border: 1px solid rgba(191,153,242,0.3); border-radius: 12px; font-size: 0.9rem; font-weight: 500; color: var(--deep-purple); cursor: pointer; line-height: 1; height: 38px; box-sizing: border-box;">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                    Back
                </button>
            </div>
            <div class="result-content">

                <!-- Daily Luck Score Card (Collapsible, Expanded by Default) -->
                <div class="card" id="luck-score-card" style="cursor: pointer; margin-top: 20px; margin-bottom: 5px;"
                    onclick="toggleLuckCard()">
                    <div id="luck-card-header"
                        style="display: flex; justify-content: space-between; align-items: center;">
                        <span id="luck-card-title" style="font-weight: 700; color: var(--deep-purple);">üéØ Daily
                            Luck Score</span>
                        <span id="luck-card-arrow"
                            style="color: var(--accent-purple); font-size: 1.2rem; transition: transform 0.3s;">‚ñº</span>
                    </div>

                    <div id="luck-card-content" style="display: block;">
                        <div class="luck-circle" style="margin: 20px auto;">
                            <svg class="progress-ring" viewBox="0 0 200 200">
                                <circle class="progress-ring-bg" cx="100" cy="100" r="90" />
                                <circle class="progress-ring-fill" cx="100" cy="100" r="90" />
                            </svg>
                            <div class="luck-value">
                                <span id="result-percentage">0</span>
                                <span class="percent-sign">%</span>
                            </div>
                        </div>

                        <!-- Caption (Inside Card) -->
                        <div id="result-caption" class="result-caption"
                            style="text-align: center; margin: 12px 0 0 0; font-size: 1rem; font-weight: 600; color: var(--accent-purple);">
                        </div>
                    </div>
                </div>

                <!-- SECTION 1: Daily Luck Analysis Button -->
                <button class="section-button" onclick="openModal('analysis')">
                    <span>üìú Read Daily Luck Analysis</span>
                    <span style="color: var(--accent-purple);">‚Üí</span>
                </button>

                <!-- SECTION 2: Cosmic Strategy Button -->
                <button id="strategy-btn" class="section-button" onclick="openModal('strategy')" style="display: none;">
                    <span>üß≠ Read Cosmic Strategy</span>
                    <span style="color: var(--accent-purple);">‚Üí</span>
                </button>

                <!-- SECTION 3: Power Hours Button -->
                <button id="power-hours-btn" class="section-button power-hours" onclick="openModal('power-hours')"
                    style="display: none;">
                    <span>‚è∞ View Power Hours</span>
                    <span style="color: var(--accent-gold);">‚Üí</span>
                </button>

                <!-- MODAL: Daily Luck Analysis -->
                <div id="analysis-modal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'analysis')">
                    <div class="modal-card" onclick="event.stopPropagation()">
                        <div class="modal-header">
                            <h3>üìú Daily Luck Analysis</h3>
                            <button class="modal-close-x" onclick="closeModal('analysis')">√ó</button>
                        </div>
                        <div class="modal-content">
                            <p id="fortune-text" style="margin-bottom: 16px;"></p>
                            <div style="display: flex; gap: 8px; margin-bottom: 16px;">
                                <button id="listen-btn" class="secondary-btn"
                                    style="padding: 8px 16px; font-size: 0.9rem;">
                                    <span>üîä</span> Listen
                                </button>
                                <button id="stop-btn" class="secondary-btn"
                                    style="padding: 8px 16px; font-size: 0.9rem; display: none;">
                                    <span>‚èπÔ∏è</span> Stop
                                </button>
                            </div>
                            <div id="factors-box" class="factors-box" style="display: none; margin-bottom: 16px;">
                                <span class="factors-label">Aggregation of below scores:</span>
                                <p id="factors-text"></p>
                            </div>
                            <div id="traits-list" class="traits-list"></div>
                        </div>
                        <div class="modal-footer">
                            <button class="modal-close-btn" onclick="closeModal('analysis')">Close</button>
                        </div>
                    </div>
                </div>

                <!-- MODAL: Cosmic Strategy -->
                <div id="strategy-modal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'strategy')">
                    <div class="modal-card" onclick="event.stopPropagation()">
                        <div class="modal-header">
                            <h3>üß≠ Cosmic Strategy</h3>
                            <button class="modal-close-x" onclick="closeModal('strategy')">√ó</button>
                        </div>
                        <div class="modal-content">
                            <p id="strategy-text" style="font-style: italic;"></p>
                        </div>
                        <div class="modal-footer">
                            <button class="modal-close-btn" onclick="closeModal('strategy')">Close</button>
                        </div>
                    </div>
                </div>

                <!-- MODAL: Power Hours -->
                <div id="power-hours-modal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'power-hours')">
                    <div class="modal-card" onclick="event.stopPropagation()">
                        <div class="modal-header" style="background: rgba(255, 200, 100, 0.2);">
                            <h3>‚è∞ Power Hours</h3>
                            <button class="modal-close-x" style="color: var(--accent-gold);"
                                onclick="closeModal('power-hours')">√ó</button>
                        </div>
                        <div class="modal-content">
                            <div id="time-slots-list" style="display: flex; flex-direction: column; gap: 12px;"></div>
                        </div>
                        <div class="modal-footer">
                            <button class="modal-close-btn gold" onclick="closeModal('power-hours')">Close</button>
                        </div>
                    </div>
                </div>


                <!-- Daily Astro Insights Button -->
                <button id="kundali-btn" class="section-button" onclick="openModal('astro-insights')">
                    <span>üåü Read Daily Astro Insights</span>
                    <span style="color: var(--accent-purple);">‚Üí</span>
                </button>

                <!-- MODAL: Daily Astro Insights -->
                <div id="astro-insights-modal" class="modal-overlay"
                    onclick="closeModalOnOverlay(event, 'astro-insights')">
                    <div class="modal-card" onclick="event.stopPropagation()">
                        <div class="modal-header">
                            <h3>üåü Daily Astro Insights</h3>
                            <button class="modal-close-x" onclick="closeModal('astro-insights')">√ó</button>
                        </div>
                        <div class="modal-content" id="kundali-report-content">
                            <p>Loading insights...</p>
                        </div>
                        <div class="modal-footer">
                            <button class="modal-close-btn" onclick="closeModal('astro-insights')">Close</button>
                        </div>
                    </div>
                </div>


                <!-- 7-Day Forecast FLIP Card -->
                <div id="forecast-flip-card" class="flip-card" style="display: none;">
                    <div class="flip-card-inner" id="forecast-flip-inner">

                        <!-- FRONT SIDE - Teaser -->
                        <div class="flip-card-front"
                            style="display: flex; flex-direction: column; align-items: center; justify-content: center; background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(192, 153, 240, 0.25)); border: 1px solid var(--accent-purple);">
                            <span style="font-size: 3rem; margin-bottom: 12px;">üîÆ</span>
                            <h3 style="color: var(--deep-purple); font-weight: 700; margin: 0;">7-Day Cosmic
                                Forecast
                            </h3>
                            <p style="color: var(--deep-purple); opacity: 0.7; margin: 8px 0 0 0;">Tap to reveal
                                your
                                luck trajectory</p>
                            <div
                                style="display: flex; align-items: center; gap: 8px; margin-top: 16px; color: var(--accent-purple);">
                                <span style="font-size: 1.2rem;">üëÜ</span>
                                <span style="font-size: 0.85rem; font-weight: 600;">Click to flip</span>
                            </div>
                        </div>

                        <!-- BACK SIDE - Full Chart -->
                        <div class="flip-card-back">

                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span style="font-size: 1.3rem;">üìÖ</span>
                                    <h3 style="margin: 0; font-size: 1rem; color: var(--deep-purple);">7-Day Luck
                                        Trajectory</h3>
                                </div>
                                <span style="font-size: 1.1rem; opacity: 0.5;">‚Ü©Ô∏è</span>
                            </div>

                            <div
                                style="display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.8rem; padding: 0 4px;">
                                <span style="color: var(--deep-purple);">Trend: <strong id="forecast-trend"
                                        style="color: var(--accent-purple);">--</strong></span>
                                <span style="color: var(--deep-purple);">Peak: <strong id="forecast-best"
                                        style="color: var(--accent-purple);">--</strong></span>
                            </div>

                            <div id="forecast-list"
                                style="display: flex; gap: 4px; flex: 1; width: 100%; align-items: flex-end;">
                                <!-- JS Injected Items -->
                            </div>
                        </div>
                    </div>
                </div>

                <button id="try-again-btn" class="primary-btn"
                    style="width: 100%; background: linear-gradient(135deg, #FF8A80 0%, #FF5252 100%); box-shadow: 0 10px 25px rgba(255, 82, 82, 0.3);">
                    <span>üè†</span> Home
                </button>

                <!-- Privacy Policy -->
                <div
                    style="margin-top: auto; padding-top: 20px; text-align: center; font-size: 0.75rem; color: var(--deep-purple-lighter); opacity: 0.8;">
                    <a href="privacy.html" style="text-decoration: none; color: inherit;">Privacy Policy</a>
                </div>
            </div>
        </div>

        <!-- ===== LOTTERY RESULT VIEW (Only Powerball Card) ===== -->
        <div id="lucky-number-result" class="view" style="display: none;">
            <!-- Back Button -->
            <div style="display: flex; justify-content: flex-start;">
                <button id="lottery-back-btn" onclick="window.goToDashboard()"
                    style="display: flex; align-items: center; gap: 6px; padding: 10px 16px; background: rgba(255,255,255,0.8); backdrop-filter: blur(10px); border: 1px solid rgba(191,153,242,0.3); border-radius: 12px; font-size: 0.9rem; font-weight: 500; color: var(--deep-purple); cursor: pointer; line-height: 1; height: 38px; box-sizing: border-box;">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                    Back
                </button>
            </div>
            <div class="result-content">

                <!-- Lucky Numbers Card -->
                <div class="card"
                    style="margin-top: 20px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(99, 102, 241, 0.08) 100%); border: 1px solid rgba(139, 92, 246, 0.25); padding: 20px;">
                    <h3
                        style="display: flex; align-items: center; gap: 8px; margin: 0 0 16px 0; font-size: 1rem; color: var(--deep-purple);">
                        üåü Your Lucky Numbers
                    </h3>

                    <!-- Permanent Numbers -->
                    <div style="margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 10px;">
                            <span
                                style="font-size: 0.75rem; text-transform: uppercase; font-weight: 600; color: #8b5cf6;">‚ú®
                                Permanent (Your Birth Energy)</span>
                        </div>
                        <div id="permanent-lucky-numbers"
                            style="display: flex; gap: 8px; justify-content: center; flex-wrap: wrap;">
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 4px;">
                                <span
                                    style="width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #8b5cf6, #6366f1); border-radius: 50%; font-weight: 700; font-size: 1.1rem; color: white; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);">--</span>
                                <span style="font-size: 0.6rem; color: #888;">Life Path</span>
                            </div>
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 4px;">
                                <span
                                    style="width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #8b5cf6, #6366f1); border-radius: 50%; font-weight: 700; font-size: 1.1rem; color: white; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);">--</span>
                                <span style="font-size: 0.6rem; color: #888;">Soul</span>
                            </div>
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 4px;">
                                <span
                                    style="width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #8b5cf6, #6366f1); border-radius: 50%; font-weight: 700; font-size: 1.1rem; color: white; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);">--</span>
                                <span style="font-size: 0.6rem; color: #888;">Destiny</span>
                            </div>
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 4px;">
                                <span
                                    style="width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #8b5cf6, #6366f1); border-radius: 50%; font-weight: 700; font-size: 1.1rem; color: white; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);">--</span>
                                <span style="font-size: 0.6rem; color: #888;">Master</span>
                            </div>
                        </div>
                    </div>

                    <!-- Daily Numbers -->
                    <div style="padding-top: 12px; border-top: 1px dashed rgba(139, 92, 246, 0.2);">
                        <div
                            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;">
                            <span
                                style="font-size: 0.75rem; text-transform: uppercase; font-weight: 600; color: #f59e0b;">üìÖ
                                Today's Lucky</span>
                            <span id="lucky-numbers-date" style="font-size: 0.65rem; color: #888;">Dec 24</span>
                        </div>
                        <div id="daily-lucky-numbers"
                            style="display: flex; gap: 8px; justify-content: center; flex-wrap: wrap;">
                            <span
                                style="width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #fbbf24, #f59e0b); border-radius: 50%; font-weight: 700; font-size: 0.95rem; color: white; box-shadow: 0 3px 10px rgba(251, 191, 36, 0.3);">--</span>
                            <span
                                style="width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #fbbf24, #f59e0b); border-radius: 50%; font-weight: 700; font-size: 0.95rem; color: white; box-shadow: 0 3px 10px rgba(251, 191, 36, 0.3);">--</span>
                            <span
                                style="width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #fbbf24, #f59e0b); border-radius: 50%; font-weight: 700; font-size: 0.95rem; color: white; box-shadow: 0 3px 10px rgba(251, 191, 36, 0.3);">--</span>
                            <span
                                style="width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #fbbf24, #f59e0b); border-radius: 50%; font-weight: 700; font-size: 0.95rem; color: white; box-shadow: 0 3px 10px rgba(251, 191, 36, 0.3);">--</span>
                        </div>
                    </div>

                    <p style="margin: 14px 0 0 0; font-size: 0.7rem; color: #888; text-align: center;">
                        Based on your name, birthdate & cosmic alignment
                    </p>
                </div>

                <!-- Powerball Card -->
                <button class="section-button power-hours" onclick="openModal('lottery')" style="margin-top: 16px;">
                    <span><span class="pb-icon"></span> View Lucky Powerball Numbers</span>
                    <span style="color: var(--accent-gold);">‚Üí</span>
                </button>

                <!-- Home Button -->
                <button id="lottery-home-btn" class="primary-btn"
                    style="margin-top: 24px; width: 100%; background: linear-gradient(135deg, #FF8A80 0%, #FF5252 100%); box-shadow: 0 10px 25px rgba(255, 82, 82, 0.3);">
                    <span>üè†</span> Home
                </button>

                <!-- Privacy Policy -->
                <div
                    style="margin-top: auto; padding-top: 20px; text-align: center; font-size: 0.75rem; color: var(--deep-purple-lighter); opacity: 0.8;">
                    <a href="privacy.html" style="text-decoration: none; color: inherit;">Privacy Policy</a>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>

    <!-- Signup Prompt Modal -->
    <div id="signup-prompt-modal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'signup-prompt')">
        <div class="modal-card" onclick="event.stopPropagation()" style="text-align: center;">
            <div class="modal-header"
                style="background: linear-gradient(135deg, rgba(255, 138, 128, 0.2) 0%, rgba(255, 82, 82, 0.1) 100%);">
                <h3><span class="pb-icon"></span> Unlock Lucky Numbers</h3>
                <button class="modal-close-x" onclick="closeModal('signup-prompt')">√ó</button>
            </div>
            <div class="modal-content" style="padding: 24px;">
                <p style="font-size: 1rem; color: var(--deep-purple); margin-bottom: 16px; line-height: 1.5;">
                    Sign up to unlock your personalized <strong>Lucky Numbers</strong> based on your Luck DNA profile!
                </p>
                <p style="font-size: 0.85rem; color: var(--deep-purple-lighter); margin-bottom: 24px;">
                    Create an account to access exclusive features including daily lottery predictions.
                </p>
            </div>
            <div class="modal-footer" style="display: flex; gap: 12px; justify-content: center;">
                <button class="primary-btn"
                    style="padding: 12px 24px; background: linear-gradient(135deg, #FF8A80 0%, #FF5252 100%); width: auto;"
                    onclick="closeModal('signup-prompt')">
                    Cancel
                </button>
                <button class="secondary-btn" style="padding: 12px 24px; width: auto;"
                    onclick="window.location.href='signup.html'">
                    <span class="pb-icon"></span> Sign Up Now
                </button>
            </div>
        </div>
    </div>

    <!-- Number Comparison Modal (NEW) -->
    <div id="comparison-modal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'comparison')">
        <div class="modal-card" style="max-height: 85vh; display: flex; flex-direction: column;"
            onclick="event.stopPropagation()">
            <div class="modal-header"
                style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.1) 100%);">
                <h3>üìä Smart Number Analysis</h3>
                <button class="modal-close-x" onclick="closeModal('comparison')">√ó</button>
            </div>
            <div class="modal-content" id="comparison-content" style="overflow-y: auto; flex: 1; padding: 16px;">

                <!-- Statistics Summary Card -->
                <div id="comparison-stats-card"
                    style="background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); border-radius: 12px; padding: 16px; margin-bottom: 20px; color: white;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <span style="font-weight: 700; font-size: 0.9rem;">üìà Match Analysis</span>
                        <span id="trust-badge"
                            style="background: rgba(255,255,255,0.2); padding: 4px 10px; border-radius: 20px; font-size: 0.7rem;">Loading...</span>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; text-align: center;">
                        <div>
                            <div id="stat-total-matches" style="font-size: 1.5rem; font-weight: 800;">--</div>
                            <div style="font-size: 0.65rem; opacity: 0.8;">Total Hits</div>
                        </div>
                        <div>
                            <div id="stat-best-line" style="font-size: 1.2rem; font-weight: 800;">--</div>
                            <div style="font-size: 0.65rem; opacity: 0.8;">Best Combo</div>
                        </div>
                        <div>
                            <div id="stat-match-rate" style="font-size: 1.5rem; font-weight: 800;">--%</div>
                            <div style="font-size: 0.65rem; opacity: 0.8;">3+ Match Rate</div>
                        </div>
                    </div>
                </div>

                <!-- Your Numbers Tabs -->
                <div style="margin-bottom: 16px;">
                    <h4
                        style="color: var(--deep-purple); font-size: 0.85rem; margin: 0 0 12px 0; text-transform: uppercase;">
                        üéØ Your Generated Combinations
                    </h4>

                    <!-- All Combinations List with Match Analysis -->
                    <div id="comparison-all-combos"
                        style="max-height: 400px; overflow-y: auto; border-radius: 8px; border: 1px solid #eee;">
                        <div style="text-align: center; padding: 20px; color: #666;">
                            <span style="font-size: 2rem;">‚è≥</span>
                            <p style="margin: 8px 0 0 0; font-size: 0.85rem;">Loading your combinations...</p>
                        </div>
                    </div>
                </div>

                <!-- Legend & Trust Info -->
                <div
                    style="margin-top: 16px; padding: 12px; background: rgba(34, 197, 94, 0.05); border: 1px solid rgba(34, 197, 94, 0.2); border-radius: 8px;">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                        <span style="font-size: 1rem;">‚úÖ</span>
                        <span style="font-weight: 600; font-size: 0.8rem; color: #15803d;">Analysis Complete</span>
                    </div>
                    <p style="margin: 0; font-size: 0.7rem; color: #666;">
                        Your combinations are analyzed against the last <strong>100 official Powerball drawings</strong>
                        from NY State Lottery API. Green = matched, √óN shows how many times that number appeared in
                        winning draws.
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-close-btn" onclick="closeModal('comparison')">Close</button>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal (Reused from Settings) -->
    <div id="edit-modal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'edit-modal')">
        <div class="modal-card" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3>‚úèÔ∏è Edit Profile</h3>
                <button class="modal-close-x"
                    onclick="document.getElementById('edit-modal').style.display='none'">√ó</button>
            </div>
            <div class="modal-content">
                <div class="input-group" style="margin-bottom: 12px;">
                    <label
                        style="font-size: 0.75rem; font-weight: 700; color: var(--deep-purple); margin-bottom: 4px; display: block;">FIRST
                        NAME</label>
                    <input type="text" id="edit-firstname" placeholder="First Name"
                        style="width: 100%; padding: 10px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.1);">
                </div>

                <div class="input-group" style="margin-bottom: 12px;">
                    <label
                        style="font-size: 0.75rem; font-weight: 700; color: var(--deep-purple); margin-bottom: 4px; display: block;">MIDDLE
                        NAME (IF ANY)</label>
                    <input type="text" id="edit-middlename" placeholder="Middle Name"
                        style="width: 100%; padding: 10px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.1);">
                </div>

                <div class="input-group" style="margin-bottom: 12px;">
                    <label
                        style="font-size: 0.75rem; font-weight: 700; color: var(--deep-purple); margin-bottom: 4px; display: block;">LAST
                        NAME</label>
                    <input type="text" id="edit-lastname" placeholder="Last Name"
                        style="width: 100%; padding: 10px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.1);">
                </div>

                <div class="input-group" style="margin-bottom: 12px;">
                    <label
                        style="font-size: 0.75rem; font-weight: 700; color: var(--deep-purple); margin-bottom: 4px; display: block;">PHONE
                        NUMBER</label>
                    <div style="display: flex; gap: 8px;">
                        <select id="edit-country-code"
                            style="width: 90px; padding: 10px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.1); background: white;">
                            <option value="+1">üá∫üá∏ +1</option>
                            <option value="+91">üáÆüá≥ +91</option>
                            <option value="+977">üá≥üáµ +977</option>
                            <option value="+52">üá≤üáΩ +52</option>
                            <option value="+44">üá¨üáß +44</option>
                            <option value="+61">üá¶üá∫ +61</option>
                            <option value="+1">üá®üá¶ +1</option>
                        </select>
                        <input type="tel" id="edit-phone" placeholder="(555) 000-0000"
                            style="flex: 1; padding: 10px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.1);">
                    </div>
                </div>

                <div class="input-group" style="margin-bottom: 12px;">
                    <label
                        style="font-size: 0.75rem; font-weight: 700; color: var(--deep-purple); margin-bottom: 4px; display: block;">DATE
                        OF BIRTH</label>
                    <input type="date" id="edit-dob"
                        style="width: 100%; padding: 10px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.1);">
                </div>

                <div class="input-group" style="margin-bottom: 12px;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                        <label style="font-size: 0.75rem; font-weight: 700; color: var(--deep-purple); margin: 0;">TIME
                            OF BIRTH</label>
                        <div style="display: flex; align-items: center; gap: 6px;">
                            <input type="checkbox" id="edit-tob-na-checkbox" style="width: auto; margin: 0;">
                            <label for="edit-tob-na-checkbox"
                                style="font-size: 0.75rem; color: var(--deep-purple); margin: 0; cursor: pointer; font-weight: 400;">Don't
                                know</label>
                        </div>
                    </div>

                    <div id="edit-time-container">
                        <input type="time" id="edit-time"
                            style="width: 100%; padding: 10px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.1);">
                    </div>

                    <div id="edit-tob-na-message"
                        style="display: none; font-size: 0.7rem; color: var(--deep-purple); opacity: 0.8; font-style: italic; margin-top: 4px;">
                        Midday standard (12:00 PM) will be used for calculation.
                    </div>
                </div>

                <div class="input-group" style="margin-bottom: 12px;">
                    <label
                        style="font-size: 0.75rem; font-weight: 700; color: var(--deep-purple); margin-bottom: 4px; display: block;">BIRTH
                        PLACE</label>
                    <input type="text" id="edit-place" placeholder="New York, USA"
                        style="width: 100%; padding: 10px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.1);">
                </div>

                <div class="input-group" style="margin-bottom: 12px;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                        <label
                            style="font-size: 0.75rem; font-weight: 700; color: var(--deep-purple); margin-bottom: 0;">CURRENT
                            LOCATION</label>
                        <button id="edit-location-info-btn" type="button"
                            style="background:none; border:1px solid var(--deep-purple); color:var(--deep-purple); border-radius:50%; width:16px; height:16px; font-size:10px; cursor:pointer; display:flex; align-items:center; justify-content:center; padding:0;">i</button>
                    </div>
                    <input type="text" id="edit-current-location" placeholder="Dallas, USA"
                        style="width: 100%; padding: 10px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.1);">
                    <div id="edit-location-explainer"
                        style="display: none; font-size: 0.7rem; color: var(--deep-purple); background: rgba(128,77,179,0.1); padding: 6px; border-radius: 6px; margin-top: 4px; line-height: 1.3;">
                        Used for local weather and cosmic signals for accurate predictions.
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="display: flex; gap: 10px;">
                <button class="secondary-btn" onclick="document.getElementById('edit-modal').style.display='none'"
                    style="flex: 1; padding: 10px; justify-content: center;">Cancel</button>
                <button id="save-profile-btn" class="primary-btn" style="flex: 1; justify-content: center;">Save
                    Changes</button>
            </div>
        </div>
    </div>


    <!-- Scan & Pay Logic (DISABLED/BACKUP) -->
    <!--
                                <div style="display: flex; flex-direction: column; gap: 12px; margin-bottom: 20px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <span style="font-size: 0.85rem; font-weight: 500;">Verify Age (18+)</span>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="age-verify-toggle">
                                            <span class="slider"></span>
                                        </label>
                                    </div>

                                    <div style="display: flex; gap: 8px;">
                                        <button id="scan-pay-btn"
                                            style="flex: 1; background: var(--accent-gold); color: white; border: none; padding: 12px; border-radius: 12px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; opacity: 0.5; pointer-events: none; transition: all 0.3s;">
                                            <span style="font-size: 1.1rem;">üì±</span> Scan Personal
                                        </button>
                                        <button id="scan-all-daily-btn"
                                            style="flex: 1; background: var(--deep-purple); color: white; border: none; padding: 12px; border-radius: 12px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; opacity: 0.5; pointer-events: none; transition: all 0.3s;">
                                            <span style="font-size: 1.1rem;">üéüÔ∏è</span> Scan Daily
                                        </button>
                                    </div>
                                </div>
                                -->

    <!-- QR Container (DISABLED/BACKUP) -->
    <!--
                                <div id="pb-qr-container" class="qr-container">
                                    <h5 style="margin: 0 0 12px 0; color: var(--deep-purple);">Your Digital Play Slip
                                    </h5>
                                    <div id="qr-code-label"
                                        style="font-size: 0.8rem; font-weight: 600; color: var(--accent-purple); margin-bottom: 8px;">
                                        Personal Numbers</div>
                                    <div id="pb-qr-code" style="margin-bottom: 12px;"></div>
                                    <p
                                        style="font-size: 0.75rem; color: #666; text-align: center; margin-bottom: 12px;">
                                        Scan at authorized lottery terminal.<br>
                                        Seed: <span id="qr-seed-hash"
                                            style="font-family: monospace; color: var(--accent-purple);"></span>
                                    </p>
                                    <button id="save-qr-btn"
                                        style="background: transparent; border: 1px solid #ddd; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 0.8rem;">
                                        üíæ Save to Gallery
                                    </button>
                                </div>
                                -->






    <!-- Info Modal -->
    <div id="info-modal" class="modal" style="display: none;">
        <div class="modal-content card" style="text-align: center;">
            <span class="close-modal" id="close-info-modal">&times;</span>
            <h3 id="info-modal-title" style="color: var(--deep-purple); margin-bottom: 15px;">--</h3>
            <p id="info-modal-text" style="color: var(--deep-purple); opacity: 0.8;">--</p>
        </div>
    </div>


    </div>


    </div>

    <script>
        // Toggle Daily Luck Score Card
        function toggleLuckCard() {
            const card = document.getElementById('luck-score-card');
            const content = document.getElementById('luck-card-content');
            const arrow = document.getElementById('luck-card-arrow');

            if (content.style.display === 'none') {
                // Expanding
                content.style.display = 'block';
                arrow.style.transform = 'rotate(0deg)';
                arrow.textContent = '‚ñº';
                card.classList.remove('collapsed');
            } else {
                // Collapsing
                content.style.display = 'none';
                arrow.style.transform = 'rotate(-90deg)';
                arrow.textContent = '‚ñ∂';
                card.classList.add('collapsed');
            }
        }

        // View Navigation Logic
        window.showLotteryView = function () {
            // Hide all views
            document.querySelectorAll('.view').forEach(el => el.style.display = 'none');
            // Show Lottery View
            document.getElementById('lottery-view').style.display = 'block';
            window.scrollTo(0, 0);
        };

        window.showDashboardView = function () {
            // Hide all views
            document.querySelectorAll('.view').forEach(el => el.style.display = 'none');
            // Show Dashboard View
            document.getElementById('dashboard-view').style.display = 'block';
            window.scrollTo(0, 0);
        };
    </script>

    <!-- Logout Confirmation Modal -->
    <div id="logout-confirm-modal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'logout-confirm')">
        <div class="modal-card" style="width: 320px;" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3>Log Out?</h3>
                <button class="modal-close-x" onclick="closeModal('logout-confirm')">√ó</button>
            </div>
            <div class="modal-content" style="text-align: center; padding: 20px;">
                <p style="color: var(--deep-purple); margin-bottom: 24px;">Are you sure you want to log out?</p>
                <div style="display: flex; gap: 12px; justify-content: center;">
                    <button class="secondary-btn" onclick="closeModal('logout-confirm')"
                        style="padding: 10px 20px;">Cancel</button>
                    <button class="primary-btn" onclick="window.confirmLogout()"
                        style="padding: 10px 20px; background: linear-gradient(135deg, #FF5252 0%, #D32F2F 100%); color: white; box-shadow: 0 4px 15px rgba(255, 82, 82, 0.4);">
                        Log Out
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase Config -->
    <script type="module" src="firebase-config.js?v=5"></script>
    <!-- API Client -->
    <script type="module" src="api-client.js?v=5"></script>
    <!-- Main Logic -->
    <script type="module" src="script.js?v=17"></script>
</body>

</html>