<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Discover Your Luck - OmniLuck</title>
    <meta name="description"
        content="Discover your daily luck percentage powered by celestial alignment and numerology">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;900&display=swap"
        rel="stylesheet">
    <link rel="apple-touch-icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ú®</text></svg>">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
</head>

<body>
    <!-- Spinning Galaxy Background -->
    <!-- Spinning Colliding Galaxies Background -->
    <div class="galaxy-container">
        <div class="galaxy-wrapper">
            <!-- Milky Way -->
            <div class="galaxy milky-way">
                <div class="galaxy-core"></div>
                <div class="arm"></div>
                <div class="arm"></div>
                <div class="arm"></div>
            </div>

            <!-- Andromeda -->
            <div class="galaxy andromeda">
                <div class="galaxy-core"></div>
                <div class="arm"></div>
                <div class="arm"></div>
                <div class="arm"></div>
            </div>

            <div class="stars"></div>
        </div>
    </div>

    <div class="app-container">
        <!-- Input View -->
        <div id="input-view" class="view active">
            <header>
                <div class="logo-container">
                    <div class="logo-glow"></div>
                    <span class="sparkle-icon">‚ú®</span>
                </div>

                <!-- User Greeting / Logout Pill (Top Right) -->
                <button id="user-pill-btn" class="logout-pill" style="display: none;">
                    <span id="user-greeting">Hi, User</span>
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" style="margin-left: 6px;">
                        <path d="M9 21 H5 A2 2 0 0 1 3 19 V5 A2 2 0 0 1 5 3 H9"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                </button>

                <h1>Discover Your Luck</h1>
                <p>A Fusion of Astrology, Physics & Predictive AI</p>
            </header>

            <div class="card">
                <div class="input-group">
                    <label for="name">
                        <span class="label-icon">üë§</span> YOUR NAME
                    </label>
                    <input type="text" id="name" placeholder="Enter your name">
                </div>

                <div class="input-group">
                    <label for="dob">
                        <span class="label-icon">üìÖ</span> DATE OF BIRTH
                    </label>
                    <input type="date" id="dob">
                </div>



                <div class="input-group">
                    <label for="birth-place">
                        <span class="label-icon">üìç</span> PLACE OF BIRTH
                    </label>
                    <input type="text" id="birth-place" placeholder="City, Country (e.g. Dallas, USA)">
                </div>

                <div class="input-group">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <label for="birth-time" style="margin-bottom: 0;">
                            <span class="label-icon">‚è∞</span> TIME OF BIRTH
                        </label>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <button id="tob-info-btn" type="button" class="info-circle">i</button>
                        </div>
                    </div>

                    <!-- Don't Know Checkbox -->
                    <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 8px;">
                        <input type="checkbox" id="tob-na-checkbox" style="width: auto; margin: 0;">
                        <label for="tob-na-checkbox"
                            style="font-size: 0.85rem; color: var(--deep-purple); margin: 0; cursor: pointer;">Don't
                            know</label>
                    </div>

                    <!-- Time & Timezone Container -->
                    <div id="time-inputs-container">
                        <div style="position: relative; margin-bottom: 12px;">
                            <input type="time" id="birth-time" style="width: 100%;">
                        </div>
                    </div>

                    <!-- N/A Message (Hidden by default) -->
                    <div id="tob-na-message"
                        style="display: none; font-size: 0.75rem; color: var(--deep-purple); opacity: 0.8; font-style: italic; margin-top: 4px;">
                        Time not provided - Daily Astrology insight will not be generated
                    </div>

                    <div id="tob-explainer" class="explainer-text" style="display: none;">
                        Add exact time of birth (local time at place of birth) to get your daily Astrology insights.
                    </div>
                </div>

                <!-- Personal Context Section -->


                <!-- Personal Context Section -->
            </div>

            <button id="reveal-btn" class="primary-btn">
                <span class="btn-text">Forecast my Luck</span>
                <span class="loading-spinner" style="display: none;"></span>
                <span class="btn-icon">ü™Ñ</span>
            </button>

            <button id="logout-main-btn" class="secondary-btn" style="margin-top: 16px;">
                <span>üö™</span> Logout
            </button>
        </div>

        <!-- Result View -->
        <div id="result-view" class="view">
            <button id="back-btn" class="back-btn">
                <span>‚Üê</span> Back
            </button>

            <div class="result-content">
                <div class="result-header">
                    <h2>Your Daily Luck</h2>
                    <!-- Zodiac Moved -->
                </div>

                <div class="luck-circle">
                    <svg class="progress-ring" viewBox="0 0 200 200">
                        <circle class="progress-ring-bg" cx="100" cy="100" r="90" />
                        <circle class="progress-ring-fill" cx="100" cy="100" r="90" />
                    </svg>
                    <div class="luck-value">
                        <span id="result-percentage">0</span>
                        <span class="percent-sign">%</span>
                    </div>
                </div>

                <!-- NEW: Daily Report Button -->
                <!-- Buttons Moved -->

                <!-- Cosmic Dashboard Removed -->

                <div class="fortune-card">
                    <!-- New Caption: "Cosmic Jackpot!" -->
                    <h2 id="result-caption" class="result-caption"></h2>

                    <div class="fortune-header">
                        <span class="fortune-icon">‚ú®</span>
                        <h3>Daily Luck Analysis</h3>
                    </div>

                    <p id="fortune-text"></p>

                    <!-- Factors Summary -->
                    <div id="factors-box" class="factors-box">
                        <span class="factors-label">WHY THIS SCORE:</span>
                        <p id="factors-text"></p>
                    </div>

                    <!-- Trait Pills -->
                    <div id="traits-list" class="traits-list"></div>
                </div>

                <!-- Zodiac Display (Moved here) -->
                <div id="zodiac-display-result"
                    style="display: flex; flex-direction: column; align-items: center; justify-content: center; margin-bottom: 20px; margin-top: 20px;">
                    <span
                        style="font-size: 0.85rem; color: var(--deep-purple); opacity: 0.8; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">ZODIAC
                        SIGN</span>
                    <div style="display: flex; align-items: center; gap: 8px; margin-top: 4px;">
                        <span id="zodiac-icon-result"
                            style="font-size: 1.8rem; filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.5));"></span>
                        <span id="zodiac-name-result"
                            style="font-size: 1.4rem; font-weight: 700; background: linear-gradient(135deg, var(--deep-purple), #8B5CF6); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;"></span>
                    </div>
                </div>

                <!-- 7-Day Forecast Container -->
                <div id="forecast-container" class="fortune-card" style="display: none; margin-top: 0;">
                    <div class="fortune-header">
                        <span class="fortune-icon">üìÖ</span>
                        <h3>7-Day Luck Trajectory</h3>
                    </div>

                    <div
                        style="display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 0.9rem; padding: 0 4px;">
                        <span style="color: var(--deep-purple);">Trend: <strong id="forecast-trend"
                                style="color: var(--accent-purple);">--</strong></span>
                        <span style="color: var(--deep-purple);">Peak: <strong id="forecast-best"
                                style="color: var(--accent-purple);">--</strong></span>
                    </div>

                    <div id="forecast-list" style="display: flex; gap: 4px; padding-bottom: 0; width: 100%;">
                        <!-- JS Injected Items -->
                    </div>
                </div>

                <!-- Daily Report Button (Moved here) -->
                <button id="kundali-btn" class="secondary-btn"
                    style="margin-bottom: 24px; background: rgba(255,255,255,0.3); border: 1px solid var(--accent-purple);">
                    <span>üìú</span> Read my Daily Luck Report
                </button>

                <!-- NEW: Report Modal (Hidden by default) -->
                <div id="kundali-modal" class="modal" style="display: none;">
                    <div class="modal-content card">
                        <span class="close-modal">&times;</span>
                        <h3>Daily Cosmic Report</h3>
                        <div id="kundali-report-content" class="report-text">
                            <p>Loading report...</p>
                        </div>
                    </div>
                </div>

                <!-- Recommended Actions -->
                <div class="actions-card" style="display: none;" id="actions-card">
                    <div class="actions-header">
                        <span class="fortune-icon">‚ö°</span>
                        <h3>Lucky Actions</h3>
                    </div>
                    <ul id="actions-list" class="actions-list">
                        <!-- Items will be injected here -->
                    </ul>
                </div>
            </div>

            <button id="try-again-btn" class="secondary-btn">
                <span>üè†</span> Home
            </button>
        </div>
    </div>

    <!-- Firebase Config -->
    <script type="module" src="firebase-config.js?v=5"></script>
    <!-- API Client -->
    <script type="module" src="api-client.js?v=5"></script>
    <!-- Main Logic -->
    <script type="module" src="script.js?v=5"></script>
</body>

</html>